@model IEnumerable<osVodigiWeb7x.Models.Account>

@{
    ViewBag.Title = "List Accounts";
}

<script type="text/javascript" lang="javascript">$(function () {
        var pagenumber = $("#txtPageNumber").val();
        var pagecount = $("#txtPageCount").val();
        if (parseInt(pagenumber) == 1) {
            $("#linkPrevious").hide();
        }
        if (parseInt(pagenumber) == parseInt(pagecount)) {
            $("#linkNext").hide();
        }
    });
    function NextPage() {
        var pagenumber = $("#txtPageNumber").val();
        var pagecount = $("#txtPageCount").val();
        if (parseInt(pagenumber) < parseInt(pagecount)) {
            $("#txtPageNumber").val(parseInt(pagenumber) + 1);
            document.getElementById("formSearch").submit();
        }
    }
    function PreviousPage() {
        var pagenumber = $("#txtPageNumber").val();
        if (parseInt(pagenumber) > 1) {
            $("#txtPageNumber").val(parseInt(pagenumber) - 1);
            document.getElementById("formSearch").submit();
        }
    }
    function ResetPageCount() {
        $("#txtPageNumber").val(1);
    }</script>


<h3>Accounts</h3>
<p id="addlink">@Html.ActionLink("Add Account", "Create")</p>
@using (Html.BeginForm("Index", "Account", FormMethod.Post, new { id = "formSearch" }))
{
    @Html.Hidden("txtPageCount", ViewData["PageCount"])
    @Html.Hidden("txtPageNumber", ViewData["PageNumber"])
    <div>
        <table>
            <tr>
                <td class="searchcell"><b>Account Name:&nbsp;</b><br />@Html.TextBox("txtAccountName", (string)ViewData["AccountName"], new { @style = "width:150px;font-size:10px;" })</td>
                <td class="searchcell"><b>Description:</b><br />@Html.TextBox("txtDescription", (string)ViewData["Description"], new { @style = "width:150px;font-size:10px;" })</td>
                <td class="searchcell"><b>Inactive:</b><br />@Html.CheckBox("chkIncludeInactive", (bool)ViewData["IncludeInactive"])</td>
                <td class="searchcell"><b>Sort By:</b><br />@Html.DropDownList("lstSortBy", (SelectList)ViewData["SortByList"], new { @style = "font-size:10px;" })@Html.DropDownList("lstAscDesc", (SelectList)ViewData["AscDescList"], new { @style = "font-size:10px;" })</td>
                <td class="searchcell" style="vertical-align:bottom;"><input type="submit" class="search" value="Search" onclick="ResetPageCount()" /></td>
            </tr>
        </table>
    </div>
}


<div class="mdc-layout-grid">
    <div class="mdc-layout-grid__inner">
        <div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
            <div class="mdc-card p-0">
                <h6 class="card-title card-padding pb-0">Accounts Manager</h6>
                @if (Model.Count() > 0)
                {
                    <div class="table-responsive">
                        <table class="table table-hoverable">
                            <thead>
                                <tr>
                                    <th class="text-left">ID</th>
                                    <th>Name</th>
                                    <th>Description</th>
                                    <th>Active</th>
                                    <th>Options</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model)
                                {
                                <tr>
                                    <td class="text-left">@Html.DisplayFor(modelItem => item.AccountID)</td>
                                    <td><b>@Html.DisplayFor(modelItem => item.AccountName)</b></td>
                                    <td>@Html.DisplayFor(modelItem => item.AccountDescription)</td>
                                    <td>@Html.DisplayFor(modelItem => item.IsActive)</td>
                                    <td>
                                        <div><span>@Html.ActionLink("Edit", "Edit", new { id = item.AccountID })</span></div>
                                    </td>
                                </tr>
                                }
                            </tbody>
                        </table>
                    </div>

                    <!-- PAGINATOR HERE -->
                    <div>
                        <table>
                            <tr>
                                <td>Page @Html.Label((string)ViewData["PageNumber"]) of @Html.Label((string)ViewData["PageCount"]) (@Html.Label((string)ViewData["RecordCount"]) Total Items)</td>
                                <td>
                                    <span onclick="PreviousPage();">Previous</span>&nbsp;&nbsp;
                                    <span onclick="NextPage();">Next</span>
                                </td>
                            </tr>
                        </table>
                    </div>
                }
                else
                {
                    <div>No Data Available</div>
                }
            </div>
        </div>
    </div>
</div>